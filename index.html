<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM Pro - Urgence</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 2rem;
            background: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 { color: #667eea; }
        .status { padding: 1rem; margin: 1rem 0; border-radius: 0.5rem; }
        .success { background: #dcfce7; color: #166534; }
        .error { background: #fee2e2; color: #dc2626; }
        .warning { background: #fef3c7; color: #92400e; }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            margin: 0.5rem;
        }
        .info { background: #f8fafc; padding: 1rem; border-left: 4px solid #667eea; margin: 1rem 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üö® CRM Pro - Mode Urgence</h1>
        
        <div class="status success">
            ‚úÖ Le site Netlify fonctionne maintenant !
        </div>
        
        <div class="info">
            <strong>Ce que nous avons r√©solu :</strong><br>
            ‚Ä¢ Site accessible ‚úÖ<br>
            ‚Ä¢ Fichier index.html valide ‚úÖ<br>
            ‚Ä¢ Structure HTML correcte ‚úÖ
        </div>
        
        <div id="diagnostic" class="status warning">
            üîç Diagnostic en cours...
        </div>
        
        <h2>Actions disponibles :</h2>
        <button onclick="loadOriginalCRM()">üöÄ Charger le CRM complet</button>
        <button onclick="testLogin()">üîê Tester la connexion</button>
        <button onclick="checkConfig()">‚öôÔ∏è V√©rifier la config</button>
        
        <div class="info">
            <h3>Configuration Netlify requise :</h3>
            <p><strong>Variables d'environnement √† ajouter :</strong></p>
            <ul>
                <li><code>VITE_SUPABASE_URL</code> = https://oxyiamruvyliueecpaam.supabase.co</li>
                <li><code>VITE_SUPABASE_ANON_KEY</code> = [Votre cl√© Supabase]</li>
            </ul>
            <p><strong>Comment :</strong> Netlify Dashboard ‚Üí Site Settings ‚Üí Environment variables</p>
        </div>
        
        <div id="next-steps" class="info">
            <h3>Prochaines √©tapes :</h3>
            <ol>
                <li>Configurez les variables d'environnement Netlify</li>
                <li>Remplacez ce fichier par votre index.html complet</li>
                <li>Testez toutes les fonctionnalit√©s</li>
            </ol>
        </div>
    </div>

    <script>
        // Diagnostic automatique
        document.addEventListener('DOMContentLoaded', function() {
            const diagnostic = document.getElementById('diagnostic');
            
            setTimeout(() => {
                try {
                    // Test de l'environnement
                    const isNetlify = window.location.hostname.includes('netlify');
                    const hasHttps = window.location.protocol === 'https:';
                    
                    let status = '‚úÖ Tests r√©ussis :\n';
                    status += `‚Ä¢ Environnement Netlify: ${isNetlify ? '‚úÖ' : '‚ùå'}\n`;
                    status += `‚Ä¢ HTTPS activ√©: ${hasHttps ? '‚úÖ' : '‚ùå'}\n`;
                    status += `‚Ä¢ JavaScript fonctionnel: ‚úÖ\n`;
                    
                    diagnostic.className = 'status success';
                    diagnostic.innerHTML = status.replace(/\n/g, '<br>');
                    
                    console.log('üîç Diagnostic complet:', {
                        hostname: window.location.hostname,
                        protocol: window.location.protocol,
                        userAgent: navigator.userAgent,
                        timestamp: new Date().toISOString()
                    });
                    
                } catch (error) {
                    diagnostic.className = 'status error';
                    diagnostic.innerHTML = `‚ùå Erreur diagnostic: ${error.message}`;
                }
            }, 1000);
        });
        
        function loadOriginalCRM() {
            alert('Pr√™t ! Maintenant remplacez ce fichier par votre index.html CRM complet.');
            console.log('üöÄ Pr√™t pour le CRM complet');
        }
        
        function testLogin() {
            // Tester si login.html existe
            window.open('login.html', '_blank');
        }
        
        function checkConfig() {
            const configInfo = `
Configuration requise dans Netlify :

1. Allez dans votre Dashboard Netlify
2. S√©lectionnez votre site "crmemailsortpro"
3. Site Settings ‚Üí Environment variables
4. Ajoutez ces variables :
   - VITE_SUPABASE_URL = https://oxyiamruvyliueecpaam.supabase.co
   - VITE_SUPABASE_ANON_KEY = [votre cl√© Supabase]
5. Red√©ployez le site

Votre cl√© Supabase se trouve sur :
supabase.com ‚Üí votre projet ‚Üí Settings ‚Üí API ‚Üí "anon public"
            `;
            
            alert(configInfo);
            console.log('‚öôÔ∏è Instructions de configuration affich√©es');
        }
        
        // Test de connectivit√©
        console.log('üåê Site fonctionnel ! URL:', window.location.href);
        console.log('üìÖ Charg√© le:', new Date().toLocaleString('fr-FR'));
    </script>
</body>
</html>
